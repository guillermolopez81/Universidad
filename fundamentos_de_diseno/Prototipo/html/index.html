<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Inventarios - Importadora</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üè¢ SISTEMA DE INVENTARIOS</h1>
            <p>Dashboard</p>
        </div>

        <!-- Alert Container -->
        <div id="alert-container"></div>

        <!-- Statistics -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number" id="total-articulos">0</div>
                <div class="stat-label">Total Art√≠culos</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="total-movimientos">0</div>
                <div class="stat-label">Total Movimientos</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="articulos-bajo-stock">0</div>
                <div class="stat-label">Art√≠culos Bajo Stock</div>
            </div>
        </div>

        <!-- Navigation Menu --> 
        <div class="nav-menu">
            <div class="menu-grid">
                <!-- Agregar Art√≠culo -->
                <a href="agregar-articulo.html" class="menu-item add">
                    <div class="menu-icon">üì¶</div>
                    <div class="menu-text">
                        <h3>Agregar Art√≠culo</h3>
                        <p>Registrar nuevos productos en el inventario</p>
                    </div>
                </a>

                <!-- Entrada de Mercanc√≠a -->
                <a href="entrada-mercancia.html" class="menu-item entry">
                    <div class="menu-icon">üì•</div>
                    <div class="menu-text">
                        <h3>Entrada de Mercanc√≠a</h3>
                        <p>Registrar ingreso de productos al stock</p>
                    </div>
                </a>

                <!-- Salida de Mercanc√≠a -->
                <a href="salida-mercancia.html" class="menu-item exit">
                    <div class="menu-icon">üì§</div>
                    <div class="menu-text">
                        <h3>Salida de Mercanc√≠a</h3>
                        <p>Registrar retiro de productos del stock</p>
                    </div>
                </a>

                <!-- Consultar Inventario -->
                <a href="consultar-inventario.html" class="menu-item consult">
                    <div class="menu-icon">üîç</div>
                    <div class="menu-text">
                        <h3>Consultar Inventario</h3>
                        <p>Buscar informaci√≥n de productos espec√≠ficos</p>
                    </div>
                </a>

                <!-- Listar Art√≠culos -->
                <a href="listar-articulos.html" class="menu-item list">
                    <div class="menu-icon">üìã</div>
                    <div class="menu-text">
                        <h3>Listar Art√≠culos</h3>
                        <p>Ver todos los productos del inventario</p>
                    </div>
                </a>

                <!-- Ver Movimientos -->
                <a href="ver-movimientos.html" class="menu-item movements">
                    <div class="menu-icon">üìä</div>
                    <div class="menu-text">
                        <h3>Ver Movimientos</h3>
                        <p>Historial de entradas y salidas</p>
                    </div>
                </a>

                <!-- Generar Reportes -->
                <a href="generar-reportes.html" class="menu-item reports">
                    <div class="menu-icon">üìÑ</div>
                    <div class="menu-text">
                        <h3>Generar Reportes</h3>
                        <p>Crear reportes del inventario</p>
                    </div>
                </a>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="card">
            <div class="card-header">
                <h3>Acciones R√°pidas</h3>
            </div>
            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                <button class="btn btn-success" onclick="window.location.href='agregar-articulo.html'">
                    ‚ûï Nuevo Art√≠culo
                </button>
                <button class="btn btn-warning" onclick="window.location.href='entrada-mercancia.html'">
                    üì• Entrada R√°pida
                </button>
                <button class="btn btn-danger" onclick="window.location.href='salida-mercancia.html'">
                    üì§ Salida R√°pida
                </button>
                <button class="btn" onclick="exportarDatos()">
                    üíæ Exportar Datos
                </button>
                <button class="btn btn-secondary" onclick="document.getElementById('import-file').click()">
                    üìÅ Importar Datos
                </button>
                <input type="file" id="import-file" accept=".json" style="display: none;" onchange="importarDatos(event)">
            </div>
        </div>

        <!-- Recent Activity -->
        <div class="card">
            <div class="card-header">
                <h3>Actividad Reciente</h3>
            </div>
            <div id="actividad-reciente">
                <p>Cargando actividad reciente...</p>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Mostrar actividad reciente al cargar la p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            mostrarActividadReciente();
        });

        function mostrarActividadReciente() {
            const contenedor = document.getElementById('actividad-reciente');
            if (!contenedor) return;

            const movimientosRecientes = inventario.movimientos
                .sort((a, b) => new Date(b.fechaHora) - new Date(a.fechaHora))
                .slice(0, 5);

            if (movimientosRecientes.length === 0) {
                contenedor.innerHTML = '<p>No hay actividad reciente.</p>';
                return;
            }

            let html = '<ul style="list-style: none; padding: 0;">';
            movimientosRecientes.forEach(mov => {
                const fecha = new Date(mov.fechaHora).toLocaleString();
                const tipoIcon = mov.tipo === 'ENTRADA' ? 'üì•' : 'üì§';
                const tipoColor = mov.tipo === 'ENTRADA' ? '#27ae60' : '#e74c3c';
                
                html += `
                    <li style="padding: 10px; border-left: 3px solid ${tipoColor}; margin-bottom: 10px; background: rgba(0,0,0,0.05); border-radius: 5px;">
                        <strong>${tipoIcon} ${mov.tipo}</strong> - ${mov.codigoArticulo}<br>
                        <small>Cantidad: ${mov.cantidad} | ${fecha}</small><br>
                        <small style="color: #666;">${mov.motivo}</small>
                    </li>
                `;
            });
            html += '</ul>';
            
            contenedor.innerHTML = html;
        }

        // Actualizar actividad cada minuto
        setInterval(mostrarActividadReciente, 60000);
    </script>
</body>
</html>